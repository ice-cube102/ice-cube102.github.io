<div class="container"> <h1 class="text-3xl font-bold mb-4 text-gray-800">나는 로봇이 아닙니다</h1> <p class="text-gray-600 mb-6">아래 이미지의 문자를 대소문자 구별하여 입력하세요.</p> <canvas id="captchaCanvas"></canvas> <div class="my-4"> <input type="text" id="userInput" class="w-full px-4 py-3 text-lg font-mono border-2 border-gray-300 rounded-lg text-gray-800 focus:outline-none focus:border-blue-500" placeholder="여기에 입력하세요..."> </div> <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4"> <button id="refreshBtn" class="bg-blue-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-300 ease-in-out"> 새로고침 </button> <button id="checkBtn" class="bg-green-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition duration-300 ease-in-out"> 확인 </button> </div> <div id="messageBox" class="message-box"></div> <div id="dailyCodeContainer" class="daily-code-box-container"> <div id="dailyCodeBox" class="daily-code-box"></div> <button id="copyBtn" class="copy-button">복사</button> </div> </div> <script> const captchaCanvas = document.getElementById('captchaCanvas'); const ctx = captchaCanvas.getContext('2d'); const userInput = document.getElementById('userInput'); const refreshBtn = document.getElementById('refreshBtn'); const checkBtn = document.getElementById('checkBtn'); const messageBox = document.getElementById('messageBox'); const dailyCodeContainer = document.getElementById('dailyCodeContainer'); const dailyCodeBox = document.getElementById('dailyCodeBox'); const copyBtn = document.getElementById('copyBtn'); let captchaText = ''; // 무작위 문자열을 생성하는 함수 function generateRandomString(length) { const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'; let result = ''; for (let i = 0; i < length; i++) { result += characters.charAt(Math.floor(Math.random() * characters.length)); } return result; } // CAPTCHA를 캔버스에 그리는 함수 function drawCaptcha(text) { captchaText = text; ctx.clearRect(0, 0, captchaCanvas.width, captchaCanvas.height); // 캔버스 배경 채우기 ctx.fillStyle = '#f9fafb'; ctx.fillRect(0, 0, captchaCanvas.width, captchaCanvas.height); // 캡차 문자열 그리기 ctx.font = 'bold 30px Inter'; let x = 10; const y = captchaCanvas.height / 2 + 10; for (let i = 0; i < text.length; i++) { const char = text[i]; ctx.save(); ctx.translate(x, y); // 글자 무작위 회전 ctx.rotate((Math.random() - 0.5) * 0.5); // 글자 무작위 색상 ctx.fillStyle = `rgb(${Math.floor(Math.random() * 200)}, ${Math.floor(Math.random() * 200)}, ${Math.floor(Math.random() * 200)})`; // 글자 무작위 크기 ctx.font = `bold ${30 + Math.floor(Math.random() * 10)}px Inter`; ctx.fillText(char, 0, 0); ctx.restore(); x += 30 + Math.floor(Math.random() * 5); } // 방해선 그리기 for (let i = 0; i < 3; i++) { ctx.beginPath(); ctx.moveTo(Math.random() * captchaCanvas.width, Math.random() * captchaCanvas.height); ctx.lineTo(Math.random() * captchaCanvas.width, Math.random() * captchaCanvas.height); ctx.strokeStyle = `rgb(${Math.floor(Math.random() * 150)}, ${Math.floor(Math.random() * 150)}, ${Math.floor(Math.random() * 150)})`; ctx.stroke(); } } // 메시지 박스를 표시하는 함수 function showMessage(message, type) { messageBox.textContent = message; messageBox.className = `message-box ${type} block`; } // 오늘의 코드를 계산하고 표시하는 함수 function showDailyCode() { const today = new Date(); const year = today.getFullYear(); const month = today.getMonth() + 1; const day = today.getDate(); const dailyCode = year * month * day; dailyCodeBox.textContent = `오늘의 코드: ${dailyCode}`; dailyCodeContainer.style.display = 'flex'; } // 입력된 문자를 확인하는 함수 function checkInput() { const trimmedInput = userInput.value.trim(); if (trimmedInput === captchaText) { showMessage('확인 완료: 당신은 사람입니다!', 'success'); showDailyCode(); } else { showMessage('오류: 문자가 일치하지 않습니다. 다시 시도하세요.', 'error'); dailyCodeContainer.style.display = 'none'; } } // 클립보드에 텍스트를 복사하는 함수 function copyToClipboard(text) { const textArea = document.createElement('textarea'); textArea.value = text; document.body.appendChild(textArea); textArea.focus(); textArea.select(); try { document.execCommand('copy'); showMessage('코드가 복사되었습니다!', 'success'); } catch (err) { console.error('Failed to copy text: ', err); showMessage('복사 실패. 다시 시도해 주세요.', 'error'); } document.body.removeChild(textArea); } // CAPTCHA 새로고침 함수 function refreshCaptcha() { const newText = generateRandomString(6); drawCaptcha(newText); userInput.value = ''; messageBox.style.display = 'none'; dailyCodeContainer.style.display = 'none'; userInput.focus(); } // 이벤트 리스너 refreshBtn.addEventListener('click', refreshCaptcha); checkBtn.addEventListener('click', checkInput); userInput.addEventListener('keydown', (event) => { if (event.key === 'Enter') { checkInput(); } }); copyBtn.addEventListener('click', () => { const codeText = dailyCodeBox.textContent.split(': ')[1]; if (codeText) { copyToClipboard(codeText); } }); // 페이지 로드 시 첫 CAPTCHA 생성 window.onload = function() { captchaCanvas.width = captchaCanvas.offsetWidth; captchaCanvas.height = captchaCanvas.offsetHeight; refreshCaptcha(); }; </script> 
